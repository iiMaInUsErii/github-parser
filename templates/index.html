<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Code Parser - Documentation</title>
    <style>
        * {
            outline: none;
        }

        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
        }

        h1,
        h2 {
            color: #333;
        }

        code {
            background: #f4f4f4;
            padding: 5px;
            border-radius: 5px;
            font-family: monospace;
        }

        pre {
            background: #f4f4f4;
            padding: 10px;
            border-radius: 5px;
            overflow-x: auto;
        }

        a {
            color: #007BFF;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }
        
        button {
            border: 0;
            border-radius: 5px;
            background-color: green;
            color: white;
            padding: 10px 20px;
            position: absolute;
            right: 30px;
        }

        button:hover {
            background-color: yellowgreen;
            color: black;
        }

        input {
            font-family: monospace;
            border-radius: 5px;
            flex-grow: 1;
            /* width: calc(4*7px); */
        }
    </style>
</head>

<body>
    <h1>GitHub Code Parser</h1>
    <p>This tool allows you to fetch and display the content of files from GitHub repositories.</p>

    <h2>How to Use</h2>
    <ol>
        <li><strong>GET Request</strong>: Use <code>/get</code> with query parameters:
            <ul>
                <li><code>repo_url</code>: Owner and repository name (e.g., <code>octocat/Hello-World</code>).</li>
                <li><code>file_path</code>: Path to the file in the repository.</li>
                <li><code>branch</code>: Branch name (default: <code>main</code>).</li>
            </ul>
            Example: <a
                href="/get?repo_url=jasminmakasana/javascript-table&file_path=index.js&branch=main">/get?repo_url=octocat/Hello-World&file_path=README.md&branch=main</a>
        </li>
        <li><strong>POST Request</strong>: Use <code>/post</code> with form data:
            <ul>
                <li><code>repo_url</code>: Owner and repository name.</li>
                <li><code>file_path</code>: Path to the file.</li>
                <li><code>branch</code>: Branch name (default: <code>main</code>).</li>
            </ul>
            Example:
            <pre>
                <button onclick='runtest()'>Run ></button>
fetch("https://github-parser-black.vercel.app/post", {
    method: "post",
    headers: { "Content-Type": "application/json;charset=utf-8" },
    body: JSON.stringify({
        repo_url: "<input 
                    value="iiMaInUsErii/tableGenerator"
                    required
                />",
        file_path: "<input
                    value="tableGenerator.min.js"
                    required
                />",
        branch: "<input
                    value="main"
                />"
    }),
})
.then(res => res.text())
.then(res => alert(res));
            </pre>
        </li>
    </ol>
</body>
<script>
    let inputs = document.getElementsByTagName('input');

    [0, 1, 2].map( (i) => {
        inputs.item(i).style.width = 8 * (inputs.item(i).value).length + 'px'
        inputs.item(i).addEventListener('keydown', () => {
            inputs.item(i).style.width = 8 * (inputs.item(i).value).length + 'px'
        })
    })

    let runtest = () => {
        fetch("https://github-parser-black.vercel.app/post", {
            method: "post",
            headers: { "Content-Type": "application/json;charset=utf-8" },
            body: JSON.stringify({
                repo_url: document.getElementsByTagName('input').item(0).value,
                file_path: document.getElementsByTagName('input').item(1).value,
                branch: document.getElementsByTagName('input').item(2).value
            }),
        })
        .then(res => res.text())
        .then(res => alert(res));
    }
    
</script>

</html>